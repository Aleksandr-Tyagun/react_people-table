{"version":3,"sources":["helpers/api.ts","constants/index.ts","components/PersonRow.tsx","components/PeopleTable.tsx","helpers/debounce.ts","components/PeoplePage.tsx","components/Navbar.tsx","components/HomePage.tsx","components/PageNotFound.tsx","App.tsx","index.tsx"],"names":["getPeople","a","fetch","response","json","PersonRow","person","name","sex","born","died","slug","fatherName","motherName","father","mother","location","useLocation","personSlug","useParams","searchParams","URLSearchParams","search","key","className","classNames","to","pathname","toString","PeopleTable","history","useHistory","useState","get","sortBy","setSortBy","sortOrder","setSortOrder","searchQuery","setSearchQuery","people","setPeople","useEffect","then","peopleFromServer","map","find","preparedPeopleList","filter","regExp","RegExp","match","sort","b","valueA","valueB","localeCompare","updateQueryUrl","useCallback","func","delay","timeoutId","args","clearTimeout","setTimeout","debounce","value","push","type","placeholder","onChange","e","currentTarget","delete","set","title","onClick","sortByName","sortOrderToggle","handleSortBy","src","alt","PeoplePage","Navbar","role","aria-label","activeClassName","exact","HomePage","PageNotFound","App","from","path","component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.aa2594dd.chunk.js","sourcesContent":["import { API_URL } from '../constants';\n\nexport const getPeople = async (): Promise<PersonFromServer[]> => {\n  const response = await fetch(`${API_URL}/people.json`);\n\n  return response.json();\n};\n","export const API_URL = 'https://mate-academy.github.io/react_people-table/api';\n","import React from 'react';\nimport classNames from 'classnames';\nimport { useParams, Link, useLocation } from 'react-router-dom';\n\ntype Props = {\n  person: Person;\n};\n\nconst PersonRow: React.FC<Props> = ({ person }) => {\n  const {\n    name,\n    sex,\n    born,\n    died,\n    slug,\n    fatherName,\n    motherName,\n    father,\n    mother,\n  } = person;\n\n  const location = useLocation();\n  const { personSlug } = useParams();\n  const searchParams = new URLSearchParams(location.search);\n\n  return (\n    <tr\n      key={name}\n      className={classNames('has-text-white', {\n        'has-background-info': sex === 'm' && personSlug !== slug,\n        'has-background-danger': sex === 'f' && personSlug !== slug,\n        'has-background-warning': personSlug === slug,\n      })}\n    >\n      <td>\n        <Link to={{\n          pathname: `/people/${slug}`,\n          search: searchParams.toString(),\n        }}\n        >\n          {name}\n        </Link>\n      </td>\n      <td>\n        {sex}\n      </td>\n      <td>\n        {born}\n      </td>\n      <td>\n        {died}\n      </td>\n      <td>\n        {father ? (\n          <Link to={{\n            pathname: `/people/${father.slug}`,\n            search: searchParams.toString(),\n          }}\n          >\n            {fatherName}\n          </Link>\n        ) : (\n          <span className=\"has-text-black\">\n            {fatherName}\n          </span>\n        )}\n      </td>\n      <td>\n        {mother ? (\n          <Link\n            to={{\n              pathname: `/people/${mother.slug}`,\n              search: searchParams.toString(),\n            }}\n          >\n            {motherName}\n          </Link>\n        ) : (\n          <span className=\"has-text-black\">\n            {motherName}\n          </span>\n        )}\n      </td>\n    </tr>\n  );\n};\n\nexport default PersonRow;\n","import React, { useEffect, useState, useCallback } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\n\nimport { getPeople } from '../helpers/api';\nimport PersonRow from './PersonRow';\nimport { debounce } from '../helpers/debounce';\n\ntype SortBy = keyof Person | null;\n\nconst PeopleTable = () => {\n  const history = useHistory();\n  const location = useLocation();\n  const searchParams = new URLSearchParams(location.search);\n\n  const [sortBy, setSortBy] = useState<SortBy>(searchParams.get('sortBy') as keyof Person);\n  const [sortOrder, setSortOrder] = useState(searchParams.get('sortOrder'));\n  const [searchQuery, setSearchQuery] = useState(searchParams.get('query') || '');\n  const [people, setPeople] = useState<Person[]>([]);\n  const headTitle = ['name', 'sex', 'born', 'died', 'motherName', 'fatherName'];\n\n  useEffect(() => {\n    getPeople().then(peopleFromServer => {\n      setPeople(peopleFromServer\n        .map(person => {\n          return {\n            ...person,\n            mother: peopleFromServer.find(({ name }) => name === person.motherName),\n            father: peopleFromServer.find(({ name }) => name === person.fatherName),\n          };\n        }));\n    });\n  }, []);\n\n  let preparedPeopleList: Person[] = people.filter(person => {\n    if (searchQuery) {\n      const regExp = new RegExp(searchQuery, 'i');\n\n      return person.name.match(regExp)\n        || (person.motherName && person.motherName.match(regExp))\n        || (person.fatherName && person.fatherName.match(regExp));\n    }\n\n    return person;\n  });\n\n  if (sortBy) {\n    preparedPeopleList = [...preparedPeopleList].sort((a, b) => {\n      const valueA = a[sortBy];\n      const valueB = b[sortBy];\n\n      if (typeof valueA === 'string' && typeof valueB === 'string') {\n        if (sortOrder === 'desc') {\n          return valueA.localeCompare(valueB);\n        }\n\n        return valueB.localeCompare(valueA);\n      }\n\n      if (typeof valueA === 'number' && typeof valueB === 'number') {\n        if (sortOrder === 'desc') {\n          return valueA - valueB;\n        }\n\n        return valueB - valueA;\n      }\n\n      return 0;\n    });\n  }\n\n  const updateQueryUrl = useCallback(debounce((value: string) => {\n    history.push({ search: value });\n  }, 500), []);\n\n  const handleSearchInput = (e: React.FormEvent<HTMLInputElement>) => {\n    const { value } = e.currentTarget;\n\n    if (value === '') {\n      searchParams.delete('query');\n    } else {\n      searchParams.set('query', value);\n    }\n\n    updateQueryUrl(searchParams.toString());\n    setSearchQuery(value);\n  };\n\n  const handleSortBy = (sortByName: keyof Person) => {\n    const sortOrderToggle = sortOrder === 'asc' ? 'desc' : 'asc';\n\n    setSortBy(sortByName);\n    setSortOrder(sortOrderToggle);\n    searchParams.set('sortBy', sortByName);\n    searchParams.set('sortOrder', sortOrderToggle);\n\n    history.push({\n      search: searchParams.toString(),\n    });\n  };\n\n  return (\n    <>\n      <input\n        className=\"input\"\n        type=\"text\"\n        placeholder=\"Find a person\"\n        value={searchQuery}\n        onChange={handleSearchInput}\n      />\n      <table className=\"table is-striped is-fullwidth\">\n        <thead>\n          <tr>\n            {headTitle.map((title: string) => (\n              <th key={title}>\n                <button\n                  className=\"button is-small\"\n                  type=\"button\"\n                  onClick={() => handleSortBy(title as keyof Person)}\n                >\n                  {(sortBy === title && sortOrder) && (\n                    <span className=\"icon\">\n                      <img\n                        className=\"sort-arrow\"\n                        src={\n                          sortOrder === 'asc'\n                            ? 'images/sort-down.svg'\n                            : 'images/sort-up.svg'\n                        }\n                        alt=\"arrow\"\n                      />\n                    </span>\n                  )}\n                  {title}\n                </button>\n              </th>\n            ))}\n          </tr>\n        </thead>\n        <tbody>\n          {preparedPeopleList.map(person => (\n            <PersonRow\n              key={person.name}\n              person={person}\n            />\n          ))}\n        </tbody>\n      </table>\n    </>\n  );\n};\n\nexport default PeopleTable;\n","export function debounce(func: (...args: string[]) => void, delay: number) {\n  let timeoutId: ReturnType<typeof setTimeout>;\n\n  return (...args: string[]): void => {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n\n    timeoutId = setTimeout(() => {\n      func(...args);\n    }, delay);\n  };\n}\n","import React from 'react';\nimport PeopleTable from './PeopleTable';\n\nconst PeoplePage = () => {\n  return (\n    <section className=\"hero\">\n      <div className=\"hero-body\">\n        <div className=\"container\">\n          <h1 className=\"title\">\n            People page\n          </h1>\n          <PeopleTable />\n        </div>\n      </div>\n    </section>\n  );\n};\n\nexport default PeoplePage;\n","import React from 'react';\nimport { NavLink } from 'react-router-dom';\n\nconst Navbar = () => {\n  return (\n    <nav className=\"navbar is-primary\" role=\"navigation\" aria-label=\"main navigation\">\n      <div className=\"navbar-menu\">\n        <div className=\"navbar-start\">\n          <NavLink\n            className=\"navbar-item\"\n            activeClassName=\"is-active\"\n            to=\"/\"\n            exact\n          >\n            Home\n          </NavLink>\n          <NavLink\n            className=\"navbar-item\"\n            activeClassName=\"is-active\"\n            to=\"/people\"\n            exact\n          >\n            People\n          </NavLink>\n        </div>\n      </div>\n    </nav>\n  );\n};\n\nexport default Navbar;\n","import React from 'react';\n\nconst HomePage = () => {\n  return (\n    <section className=\"hero\">\n      <div className=\"hero-body\">\n        <div className=\"container\">\n          <h1 className=\"title\">\n            Home page\n          </h1>\n        </div>\n      </div>\n    </section>\n  );\n};\n\nexport default HomePage;\n","import React from 'react';\n\nconst PageNotFound = () => {\n  return (\n    <section className=\"hero\">\n      <div className=\"hero-body\">\n        <div className=\"container\">\n          <h1 className=\"title\">\n            Page not found\n          </h1>\n        </div>\n      </div>\n    </section>\n  );\n};\n\nexport default PageNotFound;\n","import React from 'react';\n\nimport './App.css';\nimport {\n  Switch,\n  Route,\n  Redirect,\n} from 'react-router-dom';\n\nimport PeoplePage from './components/PeoplePage';\nimport Navbar from './components/Navbar';\nimport HomePage from './components/HomePage';\nimport PageNotFound from './components/PageNotFound';\n\nconst App = () => {\n  return (\n    <>\n      <Navbar />\n      <Switch>\n        <Redirect from=\"/home\" to=\"/\" />\n        <Route path=\"/\" exact component={HomePage} />\n        <Route path=\"/people/:personSlug?\" component={PeoplePage} />\n        <Route component={PageNotFound} />\n      </Switch>\n    </>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bulma/css/bulma.css';\nimport { HashRouter } from 'react-router-dom';\n\nimport App from './App';\n\nReactDOM.render(\n  <HashRouter>\n    <App />\n  </HashRouter>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}